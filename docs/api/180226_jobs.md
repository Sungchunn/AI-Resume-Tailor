# Jobs API

## Overview

The Jobs API provides CRUD operations for managing job postings. Job descriptions are stored and analyzed to extract keywords and requirements for resume tailoring.

**Base Path:** `/api/jobs`

**Authentication:** All endpoints require authentication.

---

## Endpoints

### Create Job

Create a new job posting for the authenticated user.

```
POST /api/jobs
```

**Request Body:**

| Field | Type | Required | Constraints |
|-------|------|----------|-------------|
| `title` | string | Yes | Job title |
| `company` | string | No | Company name |
| `raw_content` | string | Yes | Job description text |
| `url` | string | No | URL to job posting |

**Example Request:**

```bash
curl -X POST http://localhost:8000/api/jobs \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Senior Software Engineer",
    "company": "TechCorp Inc.",
    "raw_content": "We are looking for a Senior Software Engineer...\n\nRequirements:\n- 5+ years of Python experience\n- Experience with AWS\n- Strong problem-solving skills\n\nResponsibilities:\n- Design and implement scalable systems\n- Mentor junior developers",
    "url": "https://techcorp.com/careers/senior-swe"
  }'
```

**Response (201 Created):**

```json
{
  "id": "770e8400-e29b-41d4-a716-446655440000",
  "title": "Senior Software Engineer",
  "company": "TechCorp Inc.",
  "raw_content": "We are looking for a Senior Software Engineer...",
  "url": "https://techcorp.com/careers/senior-swe",
  "owner_id": "660e8400-e29b-41d4-a716-446655440001",
  "parsed_content": null,
  "created_at": "2026-02-18T10:30:00.000000",
  "updated_at": "2026-02-18T10:30:00.000000"
}
```

---

### Get Job

Retrieve a specific job posting by ID.

```
GET /api/jobs/{job_id}
```

**Path Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `job_id` | UUID | Job identifier |

**Example Request:**

```bash
curl http://localhost:8000/api/jobs/770e8400-e29b-41d4-a716-446655440000 \
  -H "Authorization: Bearer <token>"
```

**Response (200 OK):**

```json
{
  "id": "770e8400-e29b-41d4-a716-446655440000",
  "title": "Senior Software Engineer",
  "company": "TechCorp Inc.",
  "raw_content": "We are looking for a Senior Software Engineer...",
  "url": "https://techcorp.com/careers/senior-swe",
  "owner_id": "660e8400-e29b-41d4-a716-446655440001",
  "parsed_content": {
    "requirements": [
      "5+ years of Python experience",
      "Experience with AWS",
      "Strong problem-solving skills"
    ],
    "responsibilities": [
      "Design and implement scalable systems",
      "Mentor junior developers"
    ],
    "keywords": ["Python", "AWS", "scalable systems", "mentoring"]
  },
  "created_at": "2026-02-18T10:30:00.000000",
  "updated_at": "2026-02-18T10:30:00.000000"
}
```

**Error Responses:**

| Status | Condition |
|--------|-----------|
| 403 | Job belongs to another user |
| 404 | Job not found |

---

### List Jobs

Retrieve all job postings for the authenticated user.

```
GET /api/jobs
```

**Query Parameters:**

| Parameter | Type | Default | Constraints |
|-----------|------|---------|-------------|
| `skip` | integer | 0 | >= 0 |
| `limit` | integer | 10 | 1-100 |

**Example Request:**

```bash
curl "http://localhost:8000/api/jobs?skip=0&limit=20" \
  -H "Authorization: Bearer <token>"
```

**Response (200 OK):**

```json
[
  {
    "id": "770e8400-e29b-41d4-a716-446655440000",
    "title": "Senior Software Engineer",
    "company": "TechCorp Inc.",
    "raw_content": "...",
    "url": "https://techcorp.com/careers/senior-swe",
    "owner_id": "660e8400-e29b-41d4-a716-446655440001",
    "parsed_content": {...},
    "created_at": "2026-02-18T10:30:00.000000",
    "updated_at": "2026-02-18T10:30:00.000000"
  },
  {
    "id": "770e8400-e29b-41d4-a716-446655440001",
    "title": "Backend Developer",
    "company": "StartupXYZ",
    "raw_content": "...",
    "url": null,
    "owner_id": "660e8400-e29b-41d4-a716-446655440001",
    "parsed_content": {...},
    "created_at": "2026-02-17T15:00:00.000000",
    "updated_at": "2026-02-17T15:00:00.000000"
  }
]
```

---

### Update Job

Update an existing job posting.

```
PUT /api/jobs/{job_id}
```

**Path Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `job_id` | UUID | Job identifier |

**Request Body:**

| Field | Type | Required |
|-------|------|----------|
| `title` | string | No |
| `company` | string | No |
| `raw_content` | string | No |
| `url` | string | No |

**Example Request:**

```bash
curl -X PUT http://localhost:8000/api/jobs/770e8400-e29b-41d4-a716-446655440000 \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Staff Software Engineer",
    "raw_content": "Updated job description..."
  }'
```

**Response (200 OK):**

```json
{
  "id": "770e8400-e29b-41d4-a716-446655440000",
  "title": "Staff Software Engineer",
  "company": "TechCorp Inc.",
  "raw_content": "Updated job description...",
  "url": "https://techcorp.com/careers/senior-swe",
  "owner_id": "660e8400-e29b-41d4-a716-446655440001",
  "parsed_content": {...},
  "created_at": "2026-02-18T10:30:00.000000",
  "updated_at": "2026-02-18T11:00:00.000000"
}
```

**Error Responses:**

| Status | Condition |
|--------|-----------|
| 403 | Job belongs to another user |
| 404 | Job not found |

---

### Delete Job

Delete a job posting.

```
DELETE /api/jobs/{job_id}
```

**Path Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `job_id` | UUID | Job identifier |

**Example Request:**

```bash
curl -X DELETE http://localhost:8000/api/jobs/770e8400-e29b-41d4-a716-446655440000 \
  -H "Authorization: Bearer <token>"
```

**Response (204 No Content):**

No response body.

**Error Responses:**

| Status | Condition |
|--------|-----------|
| 403 | Job belongs to another user |
| 404 | Job not found |

---

## Data Models

### JobCreate

```typescript
{
  title: string;        // Job title, required
  company?: string;     // Company name, optional
  raw_content: string;  // Job description text, required
  url?: string;         // URL to job posting, optional
}
```

### JobUpdate

```typescript
{
  title?: string;       // Job title, optional
  company?: string;     // Company name, optional
  raw_content?: string; // Job description text, optional
  url?: string;         // URL to job posting, optional
}
```

### JobResponse

```typescript
{
  id: string;                    // UUID
  title: string;
  company: string | null;
  raw_content: string;
  url: string | null;
  owner_id: string;              // UUID of the user
  parsed_content: object | null; // Parsed job structure
  created_at: string;            // ISO 8601 datetime
  updated_at: string;            // ISO 8601 datetime
}
```

## Parsed Content Structure

When a job is processed, the `parsed_content` field contains extracted information:

```json
{
  "requirements": [
    "5+ years of Python experience",
    "Experience with AWS",
    "Strong problem-solving skills",
    "Bachelor's degree in Computer Science"
  ],
  "responsibilities": [
    "Design and implement scalable systems",
    "Mentor junior developers",
    "Participate in code reviews"
  ],
  "preferred": [
    "Experience with Kubernetes",
    "Familiarity with machine learning"
  ],
  "keywords": [
    "Python",
    "AWS",
    "Kubernetes",
    "scalable systems",
    "microservices",
    "mentoring"
  ],
  "skills": {
    "technical": ["Python", "AWS", "Kubernetes", "Docker"],
    "soft": ["problem-solving", "communication", "leadership"]
  },
  "experience_level": "senior",
  "employment_type": "full-time"
}
```

## Usage Notes

- Jobs are automatically parsed when created to extract keywords and requirements
- The parsed content is used by the tailoring system to match against resume content
- Store the job URL to reference the original posting later
- Jobs can be used multiple times with different resumes for comparison

## Related Endpoints

- [Tailor](180226_tailor-match.md) - Match resumes to jobs and generate tailored versions
- [Semantic Match](180226_tailor-match.md) - Find matching content blocks for a job
- [ATS Analysis](180226_ats.md) - Analyze keyword coverage against job requirements
